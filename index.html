<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–≤—Ç–æ—à–∫–æ–ª–∞: –†–∞—Å—á–µ—Ç –∫–≤–æ—Ç</title>
    <style>
        /* --- –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –∏ –ú–∞–∫–µ—Ç --- */
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            padding: 20px;
            background-color: #f4f7f6;
            color: #34495e; 
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            margin-top: 20px;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 2em;
            margin-bottom: 5px;
            font-weight: 600;
        }
        .note.header-note {
            text-align: center;
            margin-bottom: 30px;
            color: #7f8c8d;
            font-size: 1em;
        }

        /* --- –°—Ç–∏–ª–∏ –ê–∫–∫–æ—Ä–¥–µ–æ–Ω–∞ --- */
        .accordion-item {
            margin-bottom: 10px;
            border: 1px solid #bdc3c7;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .accordion-header {
            background-color: #ecf0f1;
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            font-size: 1.1em;
            color: #2c3e50;
            transition: background-color 0.2s ease;
        }
        .accordion-header:hover {
            background-color: #e0e6e8;
        }
        /* –°–∏–Ω–∏–π –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞ */
        .accordion-item.active .accordion-header {
            background-color: #007bff; 
            color: white;
        }

        .accordion-content {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.4s ease-out;
            background-color: #ffffff;
        }
        
        .accordion-item.active .accordion-content {
            padding: 20px;
            max-height: 4000px; 
        }
        .accordion-icon {
            font-size: 1.2em;
            transition: transform 0.3s ease;
        }
        .accordion-item.active .accordion-icon {
            transform: rotate(90deg);
        }


        /* --- –°—Ç–∏–ª–∏ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞) --- */
        .calculator {
            padding: 20px 0;
            margin-bottom: 10px;
            border-left: 4px solid #007bff;
            padding-left: 15px;
            background-color: #ffffff;
            scroll-margin-top: 80px; 
        }
        .calculator:not(:last-child) {
            border-bottom: 1px dashed #ecf0f1;
        }

        h3 { 
            color: #007bff; 
            font-size: 1.2em;
            margin-top: 0;
            margin-bottom: 15px;
            font-weight: 600;
            padding-bottom: 5px;
        }
        .h3-reverse {
            color: #28a745; 
            border-bottom: 2px solid #28a745;
        }
        .h3-important {
             color: #007bff; 
             border-bottom: 2px solid #007bff;
        }
        
        /* –õ–µ–π–±–ª—ã –∏ –ø–æ–ª—è –≤–≤–æ–¥–∞ */
        label { 
            display: block; 
            margin-top: 10px; 
            font-weight: 500; 
            color: #495057;
            font-size: 0.95em;
        }
        input[type="number"], select {
            width: calc(100% - 20px);
            padding: 10px;
            margin-top: 4px;
            box-sizing: border-box;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 1em;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 18px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 15px;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s ease;
            width: 100%;
        }
        button:hover { 
            background-color: #0056b3; 
        }
        .btn-reverse {
            background-color: #28a745;
        }
        .btn-reverse:hover {
            background-color: #1e7e34;
        }
        
        /* --- –ë–õ–û–ö –†–ï–ó–£–õ–¨–¢–ê–¢–û–í: –°–¢–ê–ù–î–ê–†–¢ (–ó–ï–õ–ï–ù–´–ô) --- */
        .result {
            margin-top: 15px;
            padding: 15px;
            border: 2px solid #28a745; 
            background-color: #e6f7eb; 
            color: #1e7e34; /* –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –≤—Å–µ–≥–æ –±–ª–æ–∫–∞ */
            border-radius: 6px;
            font-size: 1.05em;
            line-height: 1.5;
        }
        /* –ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ –∑–µ–ª–µ–Ω–æ–≥–æ –±–ª–æ–∫–∞ */
        .result strong {
            font-weight: bold;
            color: #1e7e34; 
        }
        
        /* --- –ë–õ–û–ö –†–ï–ó–£–õ–¨–¢–ê–¢–û–í: –í–ê–ñ–ù–´–ô (–°–ò–ù–ò–ô - –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –ª–∏–º–∏—Ç–æ–≤) --- */
        .result-important {
            border-color: #007bff;
            background-color: #e6f0ff; 
            color: #0056b3; /* –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–º–Ω–æ-—Å–∏–Ω–∏–π —Ç–µ–∫—Å—Ç –¥–ª—è –≤—Å–µ–≥–æ –±–ª–æ–∫–∞ */
        }
        .result-important strong {
            color: #004085;
        }
        
        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        .result h4 {
            font-size: 1.1em;
            margin: 0 0 10px 0; 
            padding-bottom: 5px;
            color: inherit; /* –ù–∞—Å–ª–µ–¥—É–µ—Ç —Ü–≤–µ—Ç –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–ª–æ–∫–∞ (.result –∏–ª–∏ .result-important) */
            border-bottom: 1px solid currentColor; 
            font-weight: 600; 
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ (—Ä–µ–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç) */
        .result p.main-result {
            font-size: 1.15em;
            font-weight: 600;
            margin: 10px 0;
            color: inherit; /* –ù–∞—Å–ª–µ–¥—É–µ—Ç —Ü–≤–µ—Ç –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è */
        }
        
        .result ul {
            list-style-type: none;
            padding-left: 0;
            margin-top: 10px;
        }
        /* –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–∞—Ä–∫–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞ –≤ –∑–µ–ª–µ–Ω–æ–º –±–ª–æ–∫–µ */
        .result:not(.result-important) ul li:before {
            content: "‚Ä¢"; 
            color: #28a745; /* –ó–µ–ª–µ–Ω—ã–π –º–∞—Ä–∫–µ—Ä */
            font-weight: bold; 
            display: inline-block; 
            width: 1em;
            margin-left: -1em;
        }
        /* –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–∞—Ä–∫–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞ –≤ —Å–∏–Ω–µ–º –±–ª–æ–∫–µ */
        .result-important ul li:before {
            content: "‚Ä¢"; 
            color: #007bff; /* –°–∏–Ω–∏–π –º–∞—Ä–∫–µ—Ä */
            font-weight: bold; 
            display: inline-block; 
            width: 1em;
            margin-left: -1em;
        }
        .result ul li {
            margin-bottom: 5px;
            color: inherit; /* –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –ø—É–Ω–∫—Ç–∞ —Å–ø–∏—Å–∫–∞ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è */
        }


        /* –û—Å–æ–±—ã–π —Å—Ç–∏–ª—å –¥–ª—è –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –ø—É–Ω–∫—Ç —Å–ø–∏—Å–∫–∞ */
        /* –£–¥–∞–ª—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π —Ü–≤–µ—Ç –∏ —ç–º–æ–¥–∑–∏, —á—Ç–æ–±—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–º li */
        /* .result ul li.instructor-count {
            color: #0056b3; 
            font-weight: bold;
            margin-top: 10px; 
        }
        .result ul li.instructor-count:before {
            content: "üßë‚Äçüè´"; 
            color: #0056b3;
            font-weight: bold; 
            display: inline-block; 
            width: 1em;
            margin-left: -1em;
        } */

        /* –ü—Ä–∏–º–µ—á–∞–Ω–∏—è */
        .note {
            font-style: italic;
            color: #7f8c8d;
            margin-top: 5px;
            font-size: 0.85em;
            display: block;
        }
        .result .note {
            color: inherit; /* –ù–∞—Å–ª–µ–¥—É–µ—Ç —Ü–≤–µ—Ç –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–ª–æ–∫–∞, —á—Ç–æ–±—ã –±—ã—Ç—å –∑–µ–ª–µ–Ω—ã–º –≤ –∑–µ–ª–µ–Ω–æ–º –±–ª–æ–∫–µ */
            font-size: 0.9em;
            margin-top: 15px;
        }

        .input-group {
            margin-top: 10px;
            padding: 15px;
            background-color: #f9fbfb;
            border-radius: 5px;
            border: 1px dashed #dce1e3;
        }
        .input-group h4 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #34495e;
            font-size: 1em;
            font-weight: 600;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .nav-link {
            cursor: pointer;
            color: #007bff;
            text-decoration: underline;
            font-weight: 500;
            font-size: 0.9em;
            margin-top: 5px;
            display: inline-block;
        }
        .nav-link:hover {
            color: #0056b3;
        }
    </style>
</head>
<body>

    <h1>–ê–≤—Ç–æ—à–∫–æ–ª–∞: –†–∞—Å—á–µ—Ç –∫–≤–æ—Ç</h1>
    <span class="note header-note">–†–∞—Å—á–µ—Ç—ã –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ¬´–í¬ª —Å —É—á–µ—Ç–æ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –°–∞–Ω–ü–∏–ù –∏ –ì–ò–ë–î–î.</span>

    <div class="container">
        
        <div class="accordion-item active">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <span>1. –†–∞—Å—á–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –∂–µ–ª–∞–µ–º–æ–≥–æ –∫–æ–ª-–≤–∞ –∫–≤–æ—Ç</span>
                <span class="accordion-icon">></span>
            </div>
            <div class="accordion-content">
                <div class="calculator" id="calc_reverse">
                    <h3 class="h3-reverse">–û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä. –¶–µ–ª–µ–≤–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                    <span class="note">–í–≤–µ–¥–∏—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—É—á–∞—é—â–∏—Ö—Å—è –≤ –≥–æ–¥ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç—ã, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã.</span>

                    <div class="input-group">
                        <h4>–¶–µ–ª–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:</h4>
                        <label for="K_target">–ñ–µ–ª–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—É—á–∞—é—â–∏—Ö—Å—è –≤ –≥–æ–¥:</label>
                        <input type="number" id="K_target" value="300">
                        <label for="Sgr_target">–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π —Å—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä —É—á–µ–±–Ω–æ–π –≥—Ä—É–ø–ø—ã:</label>
                        <input type="number" id="Sgr_target" value="30">
                        <span class="nav-link" onclick="scrollToElement('calc_sanpin')">‚Üí –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞—Å—á–µ—Ç—É –ª–∏–º–∏—Ç–∞ –≥—Ä—É–ø–ø—ã –ø–æ –°–∞–Ω–ü–∏–ù</span>
                    </div>
                    
                    <div class="input-group">
                        <h4>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫—É—Ä—Å–∞ –∏ —Ä–∞–±–æ—Ç—ã:</h4>
                        <label for="Pgr_target">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—É—Ä—Å–∞ –Ω–∞ –≥—Ä—É–ø–ø—É (—á–∞—Å):</label>
                        <input type="number" id="Pgr_target" value="138">
                        <label for="T_total_target">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤ –≤–æ–∂–¥–µ–Ω–∏—è –ø–æ —É—á–µ–±–Ω–æ–º—É –ø–ª–∞–Ω—É:</label>
                        <input type="number" id="T_total_target" value="56">
                        
                        <label for="instructors_target">–°–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ?</label>
                        <select id="instructors_target" onchange="updateNote('note_target', this.value)">
                            <option value="1">1 –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (1 —Å–º–µ–Ω–∞)</option>
                            <option value="2" selected>2 –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ (2 —Å–º–µ–Ω—ã)</option>
                        </select>
                        <span class="note" id="note_target">
                            **–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –ü—Ä–∏ 2 –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö, —Ä–∞—Å—á–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –¢–° –≤ –¥–µ–Ω—å - 14.4 —á–∞—Å–∞ (2 * 7.2 —á–∞—Å–∞).
                        </span>
                        
                        <label for="hours_per_day_target">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ (–ö–æ–ª-–≤–æ —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å):</label>
                        <input type="number" id="hours_per_day_target" value="8">
                    </div>

                    <button onclick="calculateReverse()" class="btn-reverse">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                    <div class="result" id="result_reverse"></div>
                </div>
            </div>
        </div>

        <div class="accordion-item">
            <div class="accordion-header" onclick="toggleAccordion(this)">
                <span>2. –†–∞—Å—á–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤</span>
                <span class="accordion-icon">></span>
            </div>
            <div class="accordion-content">
                
                <div class="calculator" id="calc_sanpin">
                    <h3 class="h3-important">–†–∞—Å—á–µ—Ç 2.1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –°–∞–Ω–ü–∏–ù (–†–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã)</h3>
                    <span class="note">–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–µ—Ä—Ö–Ω–∏–π –ª–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞ –≥—Ä—É–ø–ø—ã –∏—Å—Ö–æ–¥—è –∏–∑ –ø–ª–æ—â–∞–¥–∏ –∫–∞–±–∏–Ω–µ—Ç–∞ (2.5 –∫–≤.–º –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞).</span>
                    <label for="Area_sanpin">–ü–ª–æ—â–∞–¥—å —É—á–µ–±–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ (–∫–≤.–º):</label>
                    <input type="number" id="Area_sanpin" value="75">
                    <label for="Area_norm">–ù–æ—Ä–º–∞ –ø–ª–æ—â–∞–¥–∏ –Ω–∞ 1 —É—á–µ–Ω–∏–∫–∞ (–∫–≤.–º):</label>
                    <input type="number" id="Area_norm" value="2.5" readonly>
                    <button onclick="calculateSanPinLimit()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã</button>
                    <div class="result result-important" id="result_sanpin"></div>
                </div>
                
                <div class="calculator" id="calc_final_limit">
                    <h3 class="h3-important">–†–∞—Å—á–µ—Ç 2.2. –†–µ–∞–ª—å–Ω–∞—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (–õ–∏–º–∏—Ç—ã)</h3>
                    <span class="note">–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –º–æ—â–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–ø–∞—Ä–∫–∞ –∏ –∫–ª–∞—Å—Å–æ–≤, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–∞—à —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –≥–æ–¥–æ–≤–æ–π –ª–∏–º–∏—Ç –∫–≤–æ—Ç</span>

                    <div class="input-group">
                        <h4>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∞–∫—Ç–∏–∫–∏:</h4>
                        <label for="Ntc_final">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–µ–±–Ω—ã—Ö –¢–° –ø–æ —Ñ–∞–∫—Ç—É (–≤–∫–ª—é—á–∞—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –¢–°):</label>
                        <input type="number" id="Ntc_final" value="5">
                        
                        <label for="instructors_final">–°–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ?</label>
                        <select id="instructors_final" onchange="updateNote('note_final', this.value)">
                            <option value="1">1 –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (1 —Å–º–µ–Ω–∞)</option>
                            <option value="2" selected>2 –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ (2 —Å–º–µ–Ω—ã)</option>
                        </select>
                        <span class="note" id="note_final">
                            **–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –ü—Ä–∏ 2 –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö, —Ä–∞—Å—á–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –¢–° –≤ –¥–µ–Ω—å - 14.4 —á–∞—Å–∞ (2 * 7.2 —á–∞—Å–∞).
                        </span>
                        
                        <label for="T_final">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤ –≤–æ–∂–¥–µ–Ω–∏—è –ø–æ —É—á–µ–±–Ω–æ–º—É –ø–ª–∞–Ω—É (–¢):</label>
                        <input type="number" id="T_final" value="56">
                    </div>

                    <div class="input-group">
                        <h4>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–æ—Ä–∏–∏:</h4>
                        <label for="hours_per_day_final">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ (–ö–æ–ª-–≤–æ —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å):</label>
                        <input type="number" id="hours_per_day_final" value="4">
                        <label for="Pi_final">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–º–µ—é—â–∏—Ö—Å—è –∫–∞–±–∏–Ω–µ—Ç–æ–≤:</label>
                        <input type="number" id="Pi_final" value="1">
                        <label for="Pgr_final">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫—É—Ä—Å–∞ –Ω–∞ –≥—Ä—É–ø–ø—É (—á–∞—Å):</label>
                        <input type="number" id="Pgr_final" value="138">
                    </div>

                    <div class="input-group">
                        <h4>–°–≤—è–∑—É—é—â–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä:</h4>
                        <label for="Sgr_final">–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π —Å—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä —É—á–µ–±–Ω–æ–π –≥—Ä—É–ø–ø—ã (—á–µ–ª–æ–≤–µ–∫):</label>
                        <input type="number" id="Sgr_final" value="30">
                    </div>
                    
                    <button onclick="calculateFinalLimit()">–û–ü–†–ï–î–ï–õ–ò–¢–¨ –†–ï–ê–õ–¨–ù–´–ô –õ–ò–ú–ò–¢ –û–ë–£–ß–ê–Æ–©–ò–•–°–Ø</button>
                    <div class="result result-important" id="result_final_limit"></div>
                </div>
                
                <div class="calculator" id="calc_groups">
                    <h3>–†–∞—Å—á–µ—Ç 2.3. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ –≥—Ä—É–ø–ø</h3>
                    <span class="note">–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø –º–æ–∂–µ—Ç "–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å" –≤–∞—à —É—á–µ–±–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç.</span>
                    <label for="hours_per_day_groups">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ (–ö–æ–ª-–≤–æ —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å):</label>
                    <input type="number" id="hours_per_day_groups" value="4">
                    <label for="Pi_groups">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–º–µ—é—â–∏—Ö—Å—è —É—á–µ–±–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤:</label>
                    <input type="number" id="Pi_groups" value="1">
                    <label for="Pgr_groups">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—É—Ä—Å–∞ –Ω–∞ –æ–¥–Ω—É –≥—Ä—É–ø–ø—É (–≤ —á–∞—Å–∞—Ö):</label>
                    <input type="number" id="Pgr_groups" value="138">
                    <button onclick="calculateGroups()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª-–≤–æ –≥—Ä—É–ø–ø</button>
                    <div class="result" id="result_groups"></div>
                </div>

                <div class="calculator" id="calc_classrooms">
                    <h3>–†–∞—Å—á–µ—Ç 2.4. –ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ —É—á–µ–±–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–∞—Ö</h3>
                    <span class="note">–°–∫–æ–ª—å–∫–æ –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –Ω—É–∂–Ω–æ –¥–ª—è –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≥—Ä—É–ø–ø.</span>
                    <label for="Pgr_rooms">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—É—Ä—Å–∞ –Ω–∞ –æ–¥–Ω—É –≥—Ä—É–ø–ø—É (–≤ —á–∞—Å–∞—Ö):</label>
                    <input type="number" id="Pgr_rooms" value="138">
                    <label for="n_rooms">–û–±—â–µ–µ —á–∏—Å–ª–æ –≥—Ä—É–ø–ø (n), –∫–æ—Ç–æ—Ä—ã–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–∞–±—Ä–∞—Ç—å –≤ –≥–æ–¥:</label>
                    <input type="number" id="n_rooms" value="6">
                    <label for="hours_per_day_rooms">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ (–ö–æ–ª-–≤–æ —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å):</label>
                    <input type="number" id="hours_per_day_rooms" value="4">
                    <button onclick="calculateClassrooms()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª-–≤–æ –∫–∞–±–∏–Ω–µ—Ç–æ–≤</button>
                    <div class="result" id="result_classrooms"></div>
                </div>

                <div class="calculator" id="calc_students">
                    <h3>–†–∞—Å—á–µ—Ç 2.5. –ö–æ–ª-–≤–æ –∫–≤–æ—Ç –ø–æ –∫–æ–ª-–≤—É –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</h3>
                    <span class="note">–°–∫–æ–ª—å–∫–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –º–æ–∂–µ—Ç "–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å" –≤–∞—à –∞–≤—Ç–æ–ø–∞—Ä–∫.</span>
                    <label for="Ntc_students">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–µ–±–Ω—ã—Ö —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ —Ñ–∞–∫—Ç—É (–≤–∫–ª—é—á–∞—è 1 —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –¢–°):</label>
                    <input type="number" id="Ntc_students" value="5">
                    
                    <label for="instructors_students">–°–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ?</label>
                    <select id="instructors_students" onchange="updateNote('note_students', this.value)">
                        <option value="1">1 –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (1 —Å–º–µ–Ω–∞)</option>
                        <option value="2" selected>2 –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ (2 —Å–º–µ–Ω—ã)</option>
                    </select>
                    <span class="note" id="note_students">
                        **–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –ü—Ä–∏ 2 –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö, —Ä–∞—Å—á–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –¢–° –≤ –¥–µ–Ω—å - 14.4 —á–∞—Å–∞ (2 * 7.2 —á–∞—Å–∞).
                    </span>
                    
                    <label for="T_students">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤ –≤–æ–∂–¥–µ–Ω–∏—è –ø–æ —É—á–µ–±–Ω–æ–º—É –ø–ª–∞–Ω—É:</label>
                    <input type="number" id="T_students" value="56">
                    <button onclick="calculateStudents()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ –∫—É—Ä—Å–∞–Ω—Ç–æ–≤</button>
                    <div class="result" id="result_students"></div>
                </div>
                
                <div class="calculator" id="calc_vehicle_total">
                    <h3>–†–∞—Å—á–µ—Ç 2.6. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –æ–±—â–µ–µ –∫–æ–ª-–≤–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</h3>
                    <span class="note">–†–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¢–°, –≤–∫–ª—é—á–∞—è 1 —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ —É—á–µ–±–Ω–æ–µ –¢–°.</span>
                    <label for="T_total">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤ –≤–æ–∂–¥–µ–Ω–∏—è –ø–æ —É—á–µ–±–Ω–æ–º—É –ø–ª–∞–Ω—É:</label>
                    <input type="number" id="T_total" value="56">
                    <label for="K_total">–ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—É—á–∞—é—â–∏—Ö—Å—è –≤ –≥–æ–¥:</label>
                    <input type="number" id="K_total" value="190">
                    
                    <label for="instructors_total">–°–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ?</label>
                    <select id="instructors_total" onchange="updateNote('note_total', this.value)">
                        <option value="1">1 –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (1 —Å–º–µ–Ω–∞)</option>
                        <option value="2" selected>2 –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ (2 —Å–º–µ–Ω—ã)</option>
                    </select>
                    <span class="note" id="note_total">
                        **–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –ü—Ä–∏ 2 –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö, —Ä–∞—Å—á–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –¢–° –≤ –¥–µ–Ω—å - 14.4 —á–∞—Å–∞ (2 * 7.2 —á–∞—Å–∞).
                    </span>
                    
                    <button onclick="calculateVehicleTotal()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –æ–±—â–µ–µ –∫–æ–ª-–≤–æ –∞–≤—Ç–æ</button>
                    <div class="result" id="result_vehicle_total"></div>
                </div>

            </div>
        </div>
        
    </div>
    
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
        const DAYS_PER_MONTH = 24.5;
        const MONTHS_PER_YEAR = 12;
        const ANNUAL_MULTIPLIER = DAYS_PER_MONTH * MONTHS_PER_YEAR; // 294
        const CLASSROOM_LOAD_FACTOR = 0.75; // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ 75%
        const SANPIN_NORM = 2.5; // 2.5 –∫–≤.–º –Ω–∞ 1 —É—á–µ–Ω–∏–∫–∞
        const STANDARD_SHIFT_HOURS = 7.2; // 7.2 —á–∞—Å–∞ –≤ —Å–º–µ–Ω—É

        // --- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã –¢–° (–ù–û–í–´–ô –•–ï–õ–ü–ï–†) ---
        function getDailyWorkHours(instructor_id) {
            const instructors = parseInt(document.getElementById(instructor_id).value);
            return instructors * STANDARD_SHIFT_HOURS;
        }

        // --- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—è—Å–Ω–µ–Ω–∏—è (–ù–û–í–´–ô –•–ï–õ–ü–ï–†) ---
        function updateNote(note_id, instructors_value) {
            const hours = parseInt(instructors_value) * STANDARD_SHIFT_HOURS;
            const noteElement = document.getElementById(note_id);
            if (noteElement) {
                noteElement.innerHTML = `**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –ü—Ä–∏ ${instructors_value} –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö, —Ä–∞—Å—á–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –¢–° –≤ –¥–µ–Ω—å - ${hours.toFixed(1)} —á–∞—Å–∞ (${instructors_value} * 7.2 —á–∞—Å–∞).`;
            }
        }
        
        // --- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ê–∫–∫–æ—Ä–¥–µ–æ–Ω–∞ ---
        function toggleAccordion(header) {
            const item = header.parentNode;
            const content = header.nextElementSibling;
            
            if (item.classList.contains('active')) {
                item.classList.remove('active');
                content.style.maxHeight = '0';
            } else {
                document.querySelectorAll('.accordion-item.active').forEach(openItem => {
                    openItem.classList.remove('active');
                    openItem.querySelector('.accordion-content').style.maxHeight = '0';
                });
                
                item.classList.add('active');
                content.style.maxHeight = content.scrollHeight + 40 + 'px'; 
            }
        }
        
        // --- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –°–∫—Ä–æ–ª–ª–∞ (–ù–∞–≤–∏–≥–∞—Ü–∏–∏) ---
        function scrollToElement(id) {
            const element = document.getElementById(id);
            if (element) {
                // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —ç–ª–µ–º–µ–Ω—Ç, –æ—Ç–∫—Ä—ã—Ç
                let currentItem = element.closest('.accordion-item');
                if (currentItem && !currentItem.classList.contains('active')) {
                    toggleAccordion(currentItem.querySelector('.accordion-header'));
                }
                
                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å —É—á–µ—Ç–æ–º –æ—Ç—Å—Ç—É–ø–∞
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }


        // --- 1. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä: –†–∞—Å—á–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –ü–ª–∞–Ω–∞ (–û—Ç –û–±—Ä–∞—Ç–Ω–æ–≥–æ) ---
        function calculateReverse() {
            const K_target = parseFloat(document.getElementById('K_target').value);
            const Sgr_target = parseFloat(document.getElementById('Sgr_target').value);
            const T_total_target = parseFloat(document.getElementById('T_total_target').value);
            const Pgr_target = parseFloat(document.getElementById('Pgr_target').value);
            const t_ts_target = getDailyWorkHours('instructors_target');
            const hours_per_day_target = parseFloat(document.getElementById('hours_per_day_target').value);

            if (K_target <= 0 || Sgr_target <= 0 || Pgr_target <= 0 || t_ts_target <= 0 || hours_per_day_target <= 0 || T_total_target <= 0) {
                 document.getElementById('result_reverse').innerHTML = "–û—à–∏–±–∫–∞: –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è.";
                 return;
            }

            // 1. –ù–µ–æ–±—Ö–æ–¥–∏–º–∞—è –ø–ª–æ—â–∞–¥—å –∫–∞–±–∏–Ω–µ—Ç–∞ (–ø–æ –°–∞–Ω–ü–∏–ù)
            const Required_Area = Sgr_target * SANPIN_NORM;

            // 2. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–ø–ø (n)
            const Required_Groups = Math.ceil(K_target / Sgr_target);

            // 3. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–±–∏–Ω–µ—Ç–æ–≤ (–ü)
            const Fpom_target = hours_per_day_target * ANNUAL_MULTIPLIER;
            const Required_Classrooms_raw = (Pgr_target * Required_Groups) / (CLASSROOM_LOAD_FACTOR * Fpom_target);
            const Required_Classrooms_min = Math.ceil(Required_Classrooms_raw);

            // 4. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¢–° (–ü—Ä–∞–∫—Ç–∏–∫–∞)
            const Annual_TS_Hours = t_ts_target * ANNUAL_MULTIPLIER;
            const Required_Working_TS_raw = (T_total_target * K_target) / Annual_TS_Hours;
            const Required_Working_TS = Math.ceil(Required_Working_TS_raw);
            const Final_Required_TS = Required_Working_TS + 1; // + 1 —Ä–µ–∑–µ—Ä–≤
            
            // 5. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤
            const Instructor_Working_Hours_Per_Year = STANDARD_SHIFT_HOURS * ANNUAL_MULTIPLIER; // 7.2 * 294
            const Total_Instructor_Hours = T_total_target * K_target;
            const Required_Instructors_raw = Total_Instructor_Hours / Instructor_Working_Hours_Per_Year;
            const Required_Instructors_min = Math.ceil(Required_Instructors_raw);

            // 6. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å —á–∏—Å—Ç—ã–º HTML
            document.getElementById('result_reverse').innerHTML = 
                `<h4>–î–õ–Ø ${K_target} –û–ë–£–ß–ê–Æ–©–ò–•–°–Ø –í –ì–û–î –í–ê–ú –ù–ï–û–ë–•–û–î–ò–ú–û:</h4>
                 
                 <strong>1. –¢–ï–û–†–ò–Ø (–ö–ª–∞—Å—Å—ã –∏ –°–∞–Ω–ü–∏–ù):</strong>
                 <ul>
                    <li>–ù–µ–æ–±—Ö–æ–¥–∏–º–∞—è –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å –∫–∞–±–∏–Ω–µ—Ç–∞ (–¥–ª—è –≥—Ä—É–ø–ø—ã ${Sgr_target} —á–µ–ª.): <strong>${Required_Area.toFixed(1)}</strong> –∫–≤.–º.</li>
                    <li>–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–µ–±–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤: <strong>${Required_Classrooms_min}</strong> (–ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ ${hours_per_day_target} —á/–¥–µ–Ω—å).</li>
                 </ul>
                 
                 <strong>2. –ü–†–ê–ö–¢–ò–ö–ê (–ê–≤—Ç–æ–ø–∞—Ä–∫ –∏ –ü–µ—Ä—Å–æ–Ω–∞–ª):</strong>
                 <ul>
                    <li>–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—á–∏—Ö –¢–°: <strong>${Required_Working_TS}</strong> –µ–¥.</li>
                    <li>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¢–° (–≤–∫–ª—é—á–∞—è 1 —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ, –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ ${t_ts_target.toFixed(1)} —á/–¥–µ–Ω—å): <strong>${Final_Required_TS}</strong> –µ–¥. 
                        <span class="nav-link" onclick="scrollToElement('calc_vehicle_total')" style="color:#007bff; text-decoration: underline;">‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á–µ—Ç –¢–° –ø–æ —Ñ–æ—Ä–º—É–ª–µ</span>
                    </li>
                    <li class="instructor-count-style">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤: <strong>${Required_Instructors_min}</strong> —á–µ–ª.</li>
                 </ul>
                 <span class="note">–†–∞—Å—á–µ—Ç –¢–° –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω –ø–æ —á–∞—Å–∞–º –≤–æ–∂–¥–µ–Ω–∏—è, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ –ø–ª–∞–Ω–µ (${T_total_target} —á).</span>
                 `;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã—Å–æ—Ç—É –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞ –ø–æ—Å–ª–µ –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            const accordionContent = document.getElementById('calc_reverse').closest('.accordion-content');
            if (accordionContent) {
                accordionContent.style.maxHeight = accordionContent.scrollHeight + 40 + 'px';
            }
        }

        // --- 2. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä: –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï –ü–û –°–ê–ù–ü–ò–ù ---
        function calculateSanPinLimit() {
            const Area = parseFloat(document.getElementById('Area_sanpin').value);
            
            if (Area <= 0) {
                document.getElementById('result_sanpin').innerHTML = "–û—à–∏–±–∫–∞: –ü–ª–æ—â–∞–¥—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è.";
                return;
            }

            const maxGroupSize = Math.floor(Area / SANPIN_NORM);

            document.getElementById('result_sanpin').innerHTML = 
                `<p class="main-result">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–π —Ä–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã –ø–æ –°–∞–Ω–ü–∏–ù: <strong>${maxGroupSize}</strong> —á–µ–ª–æ–≤–µ–∫.</p>`;
                 
            document.getElementById('Sgr_final').setAttribute('max', maxGroupSize);
            document.getElementById('Sgr_final').setAttribute('title', `–ù–µ –±–æ–ª–µ–µ ${maxGroupSize} —á–µ–ª. –ø–æ –°–∞–Ω–ü–∏–ù`);
        }
        
        // --- 3. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä: –†–ï–ê–õ–¨–ù–ê–Ø –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –ü–†–û–ü–£–°–ö–ù–ê–Ø –°–ü–û–°–û–ë–ù–û–°–¢–¨ ---
        function calculateFinalLimit() {
            const Area_sanpin = parseFloat(document.getElementById('Area_sanpin').value);
            const SanPin_Limit = Math.floor(Area_sanpin / SANPIN_NORM);

            // 1. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –º–æ—â–Ω–æ—Å—Ç—å
            const Ntc = parseFloat(document.getElementById('Ntc_final').value);
            const t = getDailyWorkHours('instructors_final');
            const T = parseFloat(document.getElementById('T_final').value);
            
            if (T <= 0 || Ntc < 1 || t <= 0) {
                 document.getElementById('result_final_limit').innerHTML = "–û—à–∏–±–∫–∞: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¢, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¢–° (>=1) –∏ –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ (>0) –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏.";
                 return;
            }
            
            const working_vehicles = Ntc - 1;
            const K_Practical = Math.floor((working_vehicles * t * ANNUAL_MULTIPLIER) / T);


            // 2. –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –º–æ—â–Ω–æ—Å—Ç—å
            const hours_per_day = parseFloat(document.getElementById('hours_per_day_final').value);
            const Pi = parseFloat(document.getElementById('Pi_final').value);
            const Pgr = parseFloat(document.getElementById('Pgr_final').value);
            const Sgr_Planned = parseFloat(document.getElementById('Sgr_final').value); 
            
            const Fpom = hours_per_day * ANNUAL_MULTIPLIER; 

            if (Pgr <= 0 || Sgr_Planned <= 0 || Fpom <= 0 || Pi <= 0) {
                 document.getElementById('result_final_limit').innerHTML = "–û—à–∏–±–∫–∞: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ö—É—Ä—Å–∞ (P–≥—Ä), –ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–±–∏–Ω–µ—Ç–æ–≤, –ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –≥—Ä—É–ø–ø—ã (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å > 0), –∏ —á–∞—Å—ã –≤ –¥–µ–Ω—å.";
                 return;
            }
            
            const Sgr_Actual = Math.min(Sgr_Planned, SanPin_Limit);
            const n_MaxGroups = Math.floor((CLASSROOM_LOAD_FACTOR * Fpom * Pi) / Pgr);
            const K_Theoretical = n_MaxGroups * Sgr_Actual;
            
            // 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞
            const K_FinalLimit = Math.min(K_Practical, K_Theoretical);
            
            let bottleneck_message = "";
            let sanitation_note = "";
            
            if (Sgr_Planned > SanPin_Limit) {
                 sanitation_note = `<span style="color:#dc3545; font-weight: bold;">‚ö†Ô∏è –í–ê–ñ–ù–û: –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã (${Sgr_Planned} —á–µ–ª.) –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç –ø–æ –°–∞–Ω–ü–∏–ù (${SanPin_Limit} —á–µ–ª.). –†–∞—Å—á–µ—Ç —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–π –º–æ—â–Ω–æ—Å—Ç–∏ –≤–µ–¥–µ—Ç—Å—è –ø–æ –ª–∏–º–∏—Ç—É –°–∞–Ω–ü–∏–ù.</span><br><br>`;
            }
            
            if (K_Practical < K_Theoretical) {
                bottleneck_message = `–õ–∏–º–∏—Ç–∏—Ä—É—é—â–∏–π —Ñ–∞–∫—Ç–æ—Ä: <strong>–ü–†–ê–ö–¢–ò–ß–ï–°–ö–û–ï –û–ë–£–ß–ï–ù–ò–ï (–ê–í–¢–û–ü–ê–†–ö)</strong>.`;
            } else if (K_Theoretical < K_Practical) {
                bottleneck_message = `–õ–∏–º–∏—Ç–∏—Ä—É—é—â–∏–π —Ñ–∞–∫—Ç–æ—Ä: <strong>–¢–ï–û–†–ï–¢–ò–ß–ï–°–ö–û–ï –û–ë–£–ß–ï–ù–ò–ï (–ö–õ–ê–°–°–´/–°–ê–ù–ü–ò–ù)</strong>.`;
            } else {
                bottleneck_message = `–ò–¥–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å!`;
            }


            document.getElementById('result_final_limit').innerHTML = 
                `<h4>–†–ï–ó–£–õ–¨–¢–ê–¢–´ –°–†–ê–í–ù–ï–ù–ò–Ø:</h4>
                 ${sanitation_note}
                 <ul>
                    <li>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ê–Ø –º–æ—â–Ω–æ—Å—Ç—å (–ø–æ –¢–°, –ø—Ä–∏ ${t.toFixed(1)} —á/–¥–µ–Ω—å): <strong>${K_Practical}</strong> —á–µ–ª.</li>
                    <li>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¢–ï–û–†–ï–¢–ò–ß–ï–°–ö–ê–Ø –º–æ—â–Ω–æ—Å—Ç—å (–ø–æ –∫–ª–∞—Å—Å–∞–º): <strong>${K_Theoretical}</strong> —á–µ–ª. (–§–∞–∫—Ç. –≥—Ä—É–ø–ø–∞: ${Sgr_Actual} —á–µ–ª.)</li>
                 </ul>
                 
                 <p class="main-result">–†–ï–ê–õ–¨–ù–ê–Ø –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –ü–†–û–ü–£–°–ö–ù–ê–Ø –°–ü–û–°–û–ë–ù–û–°–¢–¨ –í –ì–û–î: <strong>${K_FinalLimit}</strong> —á–µ–ª–æ–≤–µ–∫.</p>
                 <p style="margin-top: 15px;">${bottleneck_message}</p>`;
        }
        
        // --- 4. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¢–ï–û–†–ï–¢–ò–ß–ï–°–ö–ê–Ø –º–æ—â–Ω–æ—Å—Ç—å (–≥—Ä—É–ø–ø) ---
        function calculateGroups() {
            const hours_per_day = parseFloat(document.getElementById('hours_per_day_groups').value);
            const Pi = parseFloat(document.getElementById('Pi_groups').value);
            const Pgr = parseFloat(document.getElementById('Pgr_groups').value);
            
            const Fpom = hours_per_day * ANNUAL_MULTIPLIER; 

            if (Pgr <= 0 || Fpom <= 0 || Pi <= 0) {
                document.getElementById('result_groups').innerHTML = "–û—à–∏–±–∫–∞: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å > 0).";
                return;
            }

            const resultValue = (CLASSROOM_LOAD_FACTOR * Fpom * Pi) / Pgr;

            document.getElementById('result_groups').innerHTML = 
                `<p class="main-result">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–µ–±–Ω—ã—Ö –≥—Ä—É–ø–ø –≤ –≥–æ–¥ (–ø–æ –∫–∞–±–∏–Ω–µ—Ç–∞–º): <strong>${Math.floor(resultValue)}</strong> –≥—Ä—É–ø–ø.</p>`;
        }

        // --- 5. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä: –û–±—â–µ–µ —á–∏—Å–ª–æ —É—á–µ–±–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ (–ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å) ---
        function calculateClassrooms() {
            const Pgr = parseFloat(document.getElementById('Pgr_rooms').value);
            const n = parseFloat(document.getElementById('n_rooms').value);
            const hours_per_day = parseFloat(document.getElementById('hours_per_day_rooms').value);
            
            const Fpom = hours_per_day * ANNUAL_MULTIPLIER; 
            const denominator = CLASSROOM_LOAD_FACTOR * Fpom;

            if (denominator <= 0 || Pgr <= 0 || n <= 0) {
                document.getElementById('result_classrooms').innerHTML = "–û—à–∏–±–∫–∞: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å > 0).";
                return;
            }

            const resultValue = (Pgr * n) / denominator;
            
            document.getElementById('result_classrooms').innerHTML = 
                `<p class="main-result">–î–ª—è —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è: <strong>${Math.ceil(resultValue)}</strong> —É—á–µ–±–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤.</p>`;
        }

        // --- 6. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ê–Ø –º–æ—â–Ω–æ—Å—Ç—å ---
        function calculateStudents() {
            const Ntc = parseFloat(document.getElementById('Ntc_students').value);
            const t = getDailyWorkHours('instructors_students');
            const T = parseFloat(document.getElementById('T_students').value);
            
            if (T <= 0 || Ntc < 1 || t <= 0) {
                document.getElementById('result_students').innerHTML = "–û—à–∏–±–∫–∞: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –¢, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¢–° (>=1) –∏ –ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ (>0).";
                return;
            }

            const working_vehicles = Ntc - 1;
            const resultValue = (working_vehicles * t * ANNUAL_MULTIPLIER) / T;
            
            document.getElementById('result_students').innerHTML = 
                `<p class="main-result">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—É—á–∞—é—â–∏—Ö—Å—è –≤ –≥–æ–¥ (–ø–æ –∞–≤—Ç–æ–ø–∞—Ä–∫—É, –ø—Ä–∏ ${t.toFixed(1)} —á/–¥–µ–Ω—å): <strong>${Math.floor(resultValue)}</strong> —á–µ–ª–æ–≤–µ–∫.</p>`;
        }
        
        // --- 7. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¢–° ---
        function calculateVehicleTotal() {
            const T = parseFloat(document.getElementById('T_total').value);
            const K = parseFloat(document.getElementById('K_total').value);
            const t = getDailyWorkHours('instructors_total');
            const denominator = t * ANNUAL_MULTIPLIER;

            if (denominator <= 0 || T <= 0 || K <= 0) {
                document.getElementById('result_vehicle_total').innerHTML = "–û—à–∏–±–∫–∞: –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è.";
                return;
            }

            const resultValue = (T * K / denominator);
            const finalResult = Math.ceil(resultValue) + 1; 
            
            document.getElementById('result_vehicle_total').innerHTML = 
                `–ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ *—Ä–∞–±–æ—á–∏—Ö* –¢–°: <strong>${Math.ceil(resultValue)}</strong> –µ–¥. ( ${Math.round(resultValue * 100) / 100} —Ä–∞—Å—á–µ—Ç–Ω–æ–µ).<br>
                 –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ (—Å —É—á–µ—Ç–æ–º 1 —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –¢–°, –ø—Ä–∏ ${t.toFixed(1)} —á/–¥–µ–Ω—å): <strong>${finalResult}</strong>.`;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.onload = function() {
            calculateSanPinLimit();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—è—Å–Ω–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö —Å–µ–ª–µ–∫—Ç–æ–≤
            updateNote('note_target', document.getElementById('instructors_target').value);
            updateNote('note_final', document.getElementById('instructors_final').value);
            updateNote('note_students', document.getElementById('instructors_students').value);
            updateNote('note_total', document.getElementById('instructors_total').value);
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã—Å–æ—Ç—ã –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ (–∞–∫—Ç–∏–≤–Ω–æ–≥–æ) –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞
            const firstContent = document.querySelector('.accordion-item.active .accordion-content');
            if (firstContent) {
                firstContent.style.maxHeight = firstContent.scrollHeight + 40 + 'px';
            }
        };

    </script>

</body>
</html>
